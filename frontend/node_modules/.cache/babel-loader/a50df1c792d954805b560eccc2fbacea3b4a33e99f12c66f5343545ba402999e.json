{"ast":null,"code":"import { createStore } from 'vuex';\nimport api from './api';\nexport default createStore({\n  state: {\n    // 用户信息\n    userName: localStorage.getItem('userName') || '',\n    userProfile: null,\n    // 计划阶段\n    introduction: '',\n    selfRateItems: [],\n    examData: {},\n    strategyItems: [],\n    // 执行阶段\n    profileAnalysis: '',\n    wrongAnswersAnalysis: '',\n    strategySuggestions: '',\n    chatHistory: [],\n    // 反馈阶段\n    finalSummary: '',\n    // 系统状态\n    loading: false,\n    error: null,\n    currentPhase: localStorage.getItem('currentPhase') || 'planning'\n  },\n  getters: {\n    isAuthenticated(state) {\n      return !!state.userName;\n    },\n    getCurrentPhase(state) {\n      return state.currentPhase;\n    },\n    getPhaseProgress(state) {\n      const phases = {\n        planning: ['introduction', 'self-rate', 'user-profile', 'pre-test', 'strategy-pre-test'],\n        execution: ['ai-interaction'],\n        feedback: ['post-test', 'strategy-post-test', 'summary']\n      };\n      return phases[state.currentPhase] || [];\n    }\n  },\n  mutations: {\n    SET_LOADING(state, loading) {\n      state.loading = loading;\n    },\n    SET_ERROR(state, error) {\n      state.error = error;\n    },\n    SET_USER_NAME(state, name) {\n      state.userName = name;\n      localStorage.setItem('userName', name);\n    },\n    SET_USER_PROFILE(state, profile) {\n      state.userProfile = profile;\n    },\n    SET_INTRODUCTION(state, text) {\n      state.introduction = text;\n    },\n    SET_SELF_RATE_ITEMS(state, items) {\n      state.selfRateItems = items;\n    },\n    SET_EXAM_DATA(state, {\n      id,\n      data\n    }) {\n      state.examData = {\n        ...state.examData,\n        [id]: data\n      };\n    },\n    SET_STRATEGY_ITEMS(state, items) {\n      state.strategyItems = items;\n    },\n    SET_PROFILE_ANALYSIS(state, analysis) {\n      state.profileAnalysis = analysis;\n    },\n    SET_WRONG_ANSWERS_ANALYSIS(state, analysis) {\n      state.wrongAnswersAnalysis = analysis;\n    },\n    SET_STRATEGY_SUGGESTIONS(state, suggestions) {\n      state.strategySuggestions = suggestions;\n    },\n    ADD_CHAT_MESSAGE(state, message) {\n      state.chatHistory.push(message);\n    },\n    SET_FINAL_SUMMARY(state, summary) {\n      state.finalSummary = summary;\n    },\n    SET_CURRENT_PHASE(state, phase) {\n      state.currentPhase = phase;\n      localStorage.setItem('currentPhase', phase);\n    }\n  },\n  actions: {\n    // 计划阶段\n    async fetchIntroduction({\n      commit\n    }) {\n      commit('SET_LOADING', true);\n      try {\n        const response = await api.planning.getIntroduction();\n        console.log('Introduction API响应:', response);\n\n        // 处理不同格式的响应\n        if (response.content) {\n          commit('SET_INTRODUCTION', response.content);\n        } else if (response.success && response.introduction) {\n          commit('SET_INTRODUCTION', response.introduction);\n        } else if (typeof response === 'string') {\n          commit('SET_INTRODUCTION', response);\n        } else {\n          console.error('未知的API响应格式:', response);\n          commit('SET_ERROR', '获取系统介绍失败');\n        }\n      } catch (error) {\n        console.error('获取系统介绍出错:', error);\n        commit('SET_ERROR', error.message || '获取系统介绍失败');\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async fetchSelfRateItems({\n      commit\n    }) {\n      commit('SET_LOADING', true);\n      try {\n        const response = await api.planning.getSelfRateItems();\n        console.log('SelfRate API响应:', response);\n\n        // 处理不同格式的响应\n        if (Array.isArray(response)) {\n          // 如果直接返回数组\n          commit('SET_SELF_RATE_ITEMS', response);\n        } else if (response.items) {\n          // 如果返回包含items字段的对象\n          commit('SET_SELF_RATE_ITEMS', response.items);\n        } else if (response.success && response.items) {\n          // 如果返回旧格式\n          commit('SET_SELF_RATE_ITEMS', response.items);\n        } else {\n          console.error('未知的API响应格式:', response);\n          commit('SET_ERROR', '获取自评量表失败');\n        }\n      } catch (error) {\n        console.error('获取自评量表出错:', error);\n        commit('SET_ERROR', error.message || '获取自评量表失败');\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async createUserProfile({\n      commit\n    }, userData) {\n      commit('SET_LOADING', true);\n      try {\n        const response = await api.planning.createUserProfile(userData);\n        console.log('创建用户画像响应:', response);\n\n        // 处理不同格式的响应\n        if (response.success === true || response.message && response.message.includes('成功') || !response.error) {\n          commit('SET_USER_NAME', userData.name);\n          return true;\n        } else {\n          commit('SET_ERROR', response.error || response.message || '创建用户画像失败');\n          return false;\n        }\n      } catch (error) {\n        console.error('创建用户画像错误:', error);\n        commit('SET_ERROR', error.message || '创建用户画像失败');\n        return false;\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async fetchExam({\n      commit\n    }, examId) {\n      commit('SET_LOADING', true);\n      try {\n        const response = await api.planning.getExam(examId);\n        console.log(`获取试卷${examId}响应:`, response);\n\n        // 处理不同格式的响应\n        if (response.exam_id || response.content || response.questions) {\n          commit('SET_EXAM_DATA', {\n            id: examId,\n            data: response\n          });\n          return response;\n        } else if (response.success && (response.exam_id || response.content || response.questions)) {\n          commit('SET_EXAM_DATA', {\n            id: examId,\n            data: response\n          });\n          return response;\n        } else {\n          commit('SET_ERROR', `获取试卷${examId}失败`);\n          return null;\n        }\n      } catch (error) {\n        console.error(`获取试卷${examId}错误:`, error);\n        commit('SET_ERROR', error.message || `获取试卷${examId}失败`);\n        return null;\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async fetchStrategies({\n      commit\n    }) {\n      commit('SET_LOADING', true);\n      try {\n        const response = await api.planning.getStrategies();\n        console.log('获取策略列表响应:', response);\n\n        // 处理不同格式的响应\n        if (Array.isArray(response)) {\n          commit('SET_STRATEGY_ITEMS', response);\n        } else if (response.items) {\n          commit('SET_STRATEGY_ITEMS', response.items);\n        } else if (response.success && response.items) {\n          commit('SET_STRATEGY_ITEMS', response.items);\n        } else {\n          console.error('未知的API响应格式:', response);\n          commit('SET_ERROR', '获取策略列表失败');\n        }\n      } catch (error) {\n        console.error('获取策略列表错误:', error);\n        commit('SET_ERROR', error.message || '获取策略列表失败');\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async submitExamResult({\n      commit,\n      state\n    }, {\n      examId,\n      score,\n      wrongQuestions\n    }) {\n      commit('SET_LOADING', true);\n      try {\n        const result = {\n          name: state.userName,\n          exam_id: examId,\n          score: score,\n          wrong_questions: wrongQuestions\n        };\n        const response = await api.planning.submitExamResult(result);\n        console.log('提交试卷结果响应:', response);\n\n        // 处理不同格式的响应\n        return response.success === true || response.message && response.message.includes('成功') || !response.error;\n      } catch (error) {\n        console.error('提交试卷结果错误:', error);\n        commit('SET_ERROR', error.message || '提交试卷结果失败');\n        return false;\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async submitStrategyResult({\n      commit,\n      state\n    }, score) {\n      commit('SET_LOADING', true);\n      try {\n        const result = {\n          name: state.userName,\n          score: score,\n          is_pre_test: true // 默认为前测\n        };\n        const response = await api.planning.submitStrategyResult(result);\n        console.log('提交策略问卷结果响应:', response);\n\n        // 处理不同格式的响应\n        return response.success === true || response.message && response.message.includes('成功') || !response.error;\n      } catch (error) {\n        console.error('提交策略问卷结果错误:', error);\n        commit('SET_ERROR', error.message || '提交策略问卷结果失败');\n        return false;\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    // 执行阶段\n    async fetchUserProfile({\n      commit,\n      state\n    }) {\n      if (!state.userName) return null;\n      commit('SET_LOADING', true);\n      try {\n        const response = await api.execution.getUserProfile(state.userName);\n        console.log('获取用户信息响应:', response);\n\n        // 处理不同格式的响应\n        if (response.user) {\n          commit('SET_USER_PROFILE', response.user);\n          return response.user;\n        } else if (response.success && response.user) {\n          commit('SET_USER_PROFILE', response.user);\n          return response.user;\n        } else if (response && typeof response === 'object' && !response.error) {\n          // 可能直接返回用户对象\n          commit('SET_USER_PROFILE', response);\n          return response;\n        } else {\n          commit('SET_ERROR', '获取用户信息失败');\n          return null;\n        }\n      } catch (error) {\n        console.error('获取用户信息错误:', error);\n        commit('SET_ERROR', error.message || '获取用户信息失败');\n        return null;\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async fetchProfileAnalysis({\n      commit,\n      state\n    }) {\n      if (!state.userName) return '';\n      commit('SET_LOADING', true);\n      try {\n        const response = await api.execution.analyzeProfile(state.userName);\n        console.log('分析用户画像响应:', response);\n\n        // 处理不同格式的响应\n        if (response.analysis) {\n          commit('SET_PROFILE_ANALYSIS', response.analysis);\n          return response.analysis;\n        } else if (response.success && response.analysis) {\n          commit('SET_PROFILE_ANALYSIS', response.analysis);\n          return response.analysis;\n        } else if (typeof response === 'string') {\n          commit('SET_PROFILE_ANALYSIS', response);\n          return response;\n        } else {\n          commit('SET_ERROR', '分析用户画像失败');\n          return '';\n        }\n      } catch (error) {\n        console.error('分析用户画像错误:', error);\n        commit('SET_ERROR', error.message || '分析用户画像失败');\n        return '';\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async fetchWrongAnswersAnalysis({\n      commit,\n      state\n    }) {\n      if (!state.userName) return '';\n      commit('SET_LOADING', true);\n      try {\n        const response = await api.execution.analyzeWrongAnswers(state.userName);\n        console.log('分析错题响应:', response);\n\n        // 处理不同格式的响应\n        if (response.analysis) {\n          commit('SET_WRONG_ANSWERS_ANALYSIS', response.analysis);\n          return response.analysis;\n        } else if (response.success && response.analysis) {\n          commit('SET_WRONG_ANSWERS_ANALYSIS', response.analysis);\n          return response.analysis;\n        } else if (typeof response === 'string') {\n          commit('SET_WRONG_ANSWERS_ANALYSIS', response);\n          return response;\n        } else {\n          commit('SET_ERROR', response.error || '分析错题失败');\n          return '';\n        }\n      } catch (error) {\n        console.error('分析错题错误:', error);\n        commit('SET_ERROR', error.message || '分析错题失败');\n        return '';\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async fetchStrategySuggestions({\n      commit,\n      state\n    }) {\n      if (!state.userName) return '';\n      commit('SET_LOADING', true);\n      try {\n        const response = await api.execution.suggestStrategies(state.userName);\n        console.log('获取策略建议响应:', response);\n\n        // 处理不同格式的响应\n        if (response.suggestions) {\n          commit('SET_STRATEGY_SUGGESTIONS', response.suggestions);\n          return response.suggestions;\n        } else if (response.success && response.suggestions) {\n          commit('SET_STRATEGY_SUGGESTIONS', response.suggestions);\n          return response.suggestions;\n        } else if (typeof response === 'string') {\n          commit('SET_STRATEGY_SUGGESTIONS', response);\n          return response;\n        } else {\n          commit('SET_ERROR', '获取策略建议失败');\n          return '';\n        }\n      } catch (error) {\n        console.error('获取策略建议错误:', error);\n        commit('SET_ERROR', error.message || '获取策略建议失败');\n        return '';\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async sendChatMessage({\n      commit,\n      state\n    }, message) {\n      if (!state.userName) return null;\n\n      // 添加用户消息到历史\n      const userMessage = {\n        role: 'user',\n        content: message,\n        timestamp: new Date().toISOString()\n      };\n      commit('ADD_CHAT_MESSAGE', userMessage);\n      commit('SET_LOADING', true);\n      try {\n        const response = await api.execution.chat(state.userName, message);\n        console.log('发送消息响应:', response);\n\n        // 处理不同格式的响应\n        if (response.response) {\n          // 添加AI回复到历史\n          const aiMessage = {\n            role: 'assistant',\n            content: response.response,\n            timestamp: new Date().toISOString()\n          };\n          commit('ADD_CHAT_MESSAGE', aiMessage);\n          return aiMessage;\n        } else if (response.success && response.response) {\n          const aiMessage = {\n            role: 'assistant',\n            content: response.response,\n            timestamp: new Date().toISOString()\n          };\n          commit('ADD_CHAT_MESSAGE', aiMessage);\n          return aiMessage;\n        } else if (typeof response === 'string') {\n          const aiMessage = {\n            role: 'assistant',\n            content: response,\n            timestamp: new Date().toISOString()\n          };\n          commit('ADD_CHAT_MESSAGE', aiMessage);\n          return aiMessage;\n        } else {\n          commit('SET_ERROR', response.error || '发送消息失败');\n          return null;\n        }\n      } catch (error) {\n        console.error('发送消息错误:', error);\n        commit('SET_ERROR', error.message || '发送消息失败');\n        return null;\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    // 反馈阶段\n    async fetchFinalSummary({\n      commit,\n      state\n    }) {\n      if (!state.userName) return '';\n      commit('SET_LOADING', true);\n      try {\n        const response = await api.feedback.getFinalSummary(state.userName);\n        console.log('获取学习总结响应:', response);\n\n        // 处理不同格式的响应\n        if (response.summary) {\n          commit('SET_FINAL_SUMMARY', response.summary);\n          return response.summary;\n        } else if (response.success && response.summary) {\n          commit('SET_FINAL_SUMMARY', response.summary);\n          return response.summary;\n        } else if (typeof response === 'string') {\n          commit('SET_FINAL_SUMMARY', response);\n          return response;\n        } else {\n          commit('SET_ERROR', '获取学习总结失败');\n          return '';\n        }\n      } catch (error) {\n        console.error('获取学习总结错误:', error);\n        commit('SET_ERROR', error.message || '获取学习总结失败');\n        return '';\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    // 系统状态\n    setCurrentPhase({\n      commit\n    }, phase) {\n      commit('SET_CURRENT_PHASE', phase);\n    }\n  }\n});","map":{"version":3,"names":["createStore","api","state","userName","localStorage","getItem","userProfile","introduction","selfRateItems","examData","strategyItems","profileAnalysis","wrongAnswersAnalysis","strategySuggestions","chatHistory","finalSummary","loading","error","currentPhase","getters","isAuthenticated","getCurrentPhase","getPhaseProgress","phases","planning","execution","feedback","mutations","SET_LOADING","SET_ERROR","SET_USER_NAME","name","setItem","SET_USER_PROFILE","profile","SET_INTRODUCTION","text","SET_SELF_RATE_ITEMS","items","SET_EXAM_DATA","id","data","SET_STRATEGY_ITEMS","SET_PROFILE_ANALYSIS","analysis","SET_WRONG_ANSWERS_ANALYSIS","SET_STRATEGY_SUGGESTIONS","suggestions","ADD_CHAT_MESSAGE","message","push","SET_FINAL_SUMMARY","summary","SET_CURRENT_PHASE","phase","actions","fetchIntroduction","commit","response","getIntroduction","console","log","content","success","fetchSelfRateItems","getSelfRateItems","Array","isArray","createUserProfile","userData","includes","fetchExam","examId","getExam","exam_id","questions","fetchStrategies","getStrategies","submitExamResult","score","wrongQuestions","result","wrong_questions","submitStrategyResult","is_pre_test","fetchUserProfile","getUserProfile","user","fetchProfileAnalysis","analyzeProfile","fetchWrongAnswersAnalysis","analyzeWrongAnswers","fetchStrategySuggestions","suggestStrategies","sendChatMessage","userMessage","role","timestamp","Date","toISOString","chat","aiMessage","fetchFinalSummary","getFinalSummary","setCurrentPhase"],"sources":["D:/PycharmProjects/perss_v4/frontend/src/store.js"],"sourcesContent":["import { createStore } from 'vuex';\r\nimport api from './api';\r\n\r\nexport default createStore({\r\n  state: {\r\n    // 用户信息\r\n    userName: localStorage.getItem('userName') || '',\r\n    userProfile: null,\r\n\r\n    // 计划阶段\r\n    introduction: '',\r\n    selfRateItems: [],\r\n    examData: {},\r\n    strategyItems: [],\r\n\r\n    // 执行阶段\r\n    profileAnalysis: '',\r\n    wrongAnswersAnalysis: '',\r\n    strategySuggestions: '',\r\n    chatHistory: [],\r\n\r\n    // 反馈阶段\r\n    finalSummary: '',\r\n\r\n    // 系统状态\r\n    loading: false,\r\n    error: null,\r\n    currentPhase: localStorage.getItem('currentPhase') || 'planning'\r\n  },\r\n\r\n  getters: {\r\n    isAuthenticated(state) {\r\n      return !!state.userName;\r\n    },\r\n\r\n    getCurrentPhase(state) {\r\n      return state.currentPhase;\r\n    },\r\n\r\n    getPhaseProgress(state) {\r\n      const phases = {\r\n        planning: ['introduction', 'self-rate', 'user-profile', 'pre-test', 'strategy-pre-test'],\r\n        execution: ['ai-interaction'],\r\n        feedback: ['post-test', 'strategy-post-test', 'summary']\r\n      };\r\n\r\n      return phases[state.currentPhase] || [];\r\n    }\r\n  },\r\n\r\n  mutations: {\r\n    SET_LOADING(state, loading) {\r\n      state.loading = loading;\r\n    },\r\n\r\n    SET_ERROR(state, error) {\r\n      state.error = error;\r\n    },\r\n\r\n    SET_USER_NAME(state, name) {\r\n      state.userName = name;\r\n      localStorage.setItem('userName', name);\r\n    },\r\n\r\n    SET_USER_PROFILE(state, profile) {\r\n      state.userProfile = profile;\r\n    },\r\n\r\n    SET_INTRODUCTION(state, text) {\r\n      state.introduction = text;\r\n    },\r\n\r\n    SET_SELF_RATE_ITEMS(state, items) {\r\n      state.selfRateItems = items;\r\n    },\r\n\r\n    SET_EXAM_DATA(state, { id, data }) {\r\n      state.examData = {\r\n        ...state.examData,\r\n        [id]: data\r\n      };\r\n    },\r\n\r\n    SET_STRATEGY_ITEMS(state, items) {\r\n      state.strategyItems = items;\r\n    },\r\n\r\n    SET_PROFILE_ANALYSIS(state, analysis) {\r\n      state.profileAnalysis = analysis;\r\n    },\r\n\r\n    SET_WRONG_ANSWERS_ANALYSIS(state, analysis) {\r\n      state.wrongAnswersAnalysis = analysis;\r\n    },\r\n\r\n    SET_STRATEGY_SUGGESTIONS(state, suggestions) {\r\n      state.strategySuggestions = suggestions;\r\n    },\r\n\r\n    ADD_CHAT_MESSAGE(state, message) {\r\n      state.chatHistory.push(message);\r\n    },\r\n\r\n    SET_FINAL_SUMMARY(state, summary) {\r\n      state.finalSummary = summary;\r\n    },\r\n\r\n    SET_CURRENT_PHASE(state, phase) {\r\n      state.currentPhase = phase;\r\n      localStorage.setItem('currentPhase', phase);\r\n    }\r\n  },\r\n\r\n  actions: {\r\n    // 计划阶段\r\n    async fetchIntroduction({ commit }) {\r\n      commit('SET_LOADING', true);\r\n      try {\r\n        const response = await api.planning.getIntroduction();\r\n        console.log('Introduction API响应:', response);\r\n\r\n        // 处理不同格式的响应\r\n        if (response.content) {\r\n          commit('SET_INTRODUCTION', response.content);\r\n        }\r\n        else if (response.success && response.introduction) {\r\n          commit('SET_INTRODUCTION', response.introduction);\r\n        }\r\n        else if (typeof response === 'string') {\r\n          commit('SET_INTRODUCTION', response);\r\n        }\r\n        else {\r\n          console.error('未知的API响应格式:', response);\r\n          commit('SET_ERROR', '获取系统介绍失败');\r\n        }\r\n      } catch (error) {\r\n        console.error('获取系统介绍出错:', error);\r\n        commit('SET_ERROR', error.message || '获取系统介绍失败');\r\n      } finally {\r\n        commit('SET_LOADING', false);\r\n      }\r\n    },\r\n\r\n    async fetchSelfRateItems({ commit }) {\r\n      commit('SET_LOADING', true);\r\n      try {\r\n        const response = await api.planning.getSelfRateItems();\r\n        console.log('SelfRate API响应:', response);\r\n\r\n        // 处理不同格式的响应\r\n        if (Array.isArray(response)) {\r\n          // 如果直接返回数组\r\n          commit('SET_SELF_RATE_ITEMS', response);\r\n        }\r\n        else if (response.items) {\r\n          // 如果返回包含items字段的对象\r\n          commit('SET_SELF_RATE_ITEMS', response.items);\r\n        }\r\n        else if (response.success && response.items) {\r\n          // 如果返回旧格式\r\n          commit('SET_SELF_RATE_ITEMS', response.items);\r\n        }\r\n        else {\r\n          console.error('未知的API响应格式:', response);\r\n          commit('SET_ERROR', '获取自评量表失败');\r\n        }\r\n      } catch (error) {\r\n        console.error('获取自评量表出错:', error);\r\n        commit('SET_ERROR', error.message || '获取自评量表失败');\r\n      } finally {\r\n        commit('SET_LOADING', false);\r\n      }\r\n    },\r\n\r\n    async createUserProfile({ commit }, userData) {\r\n      commit('SET_LOADING', true);\r\n      try {\r\n        const response = await api.planning.createUserProfile(userData);\r\n        console.log('创建用户画像响应:', response);\r\n\r\n        // 处理不同格式的响应\r\n        if (response.success === true ||\r\n            (response.message && response.message.includes('成功')) ||\r\n            !response.error) {\r\n          commit('SET_USER_NAME', userData.name);\r\n          return true;\r\n        } else {\r\n          commit('SET_ERROR', response.error || response.message || '创建用户画像失败');\r\n          return false;\r\n        }\r\n      } catch (error) {\r\n        console.error('创建用户画像错误:', error);\r\n        commit('SET_ERROR', error.message || '创建用户画像失败');\r\n        return false;\r\n      } finally {\r\n        commit('SET_LOADING', false);\r\n      }\r\n    },\r\n\r\n    async fetchExam({ commit }, examId) {\r\n      commit('SET_LOADING', true);\r\n      try {\r\n        const response = await api.planning.getExam(examId);\r\n        console.log(`获取试卷${examId}响应:`, response);\r\n\r\n        // 处理不同格式的响应\r\n        if (response.exam_id || response.content || response.questions) {\r\n          commit('SET_EXAM_DATA', { id: examId, data: response });\r\n          return response;\r\n        }\r\n        else if (response.success && (response.exam_id || response.content || response.questions)) {\r\n          commit('SET_EXAM_DATA', { id: examId, data: response });\r\n          return response;\r\n        }\r\n        else {\r\n          commit('SET_ERROR', `获取试卷${examId}失败`);\r\n          return null;\r\n        }\r\n      } catch (error) {\r\n        console.error(`获取试卷${examId}错误:`, error);\r\n        commit('SET_ERROR', error.message || `获取试卷${examId}失败`);\r\n        return null;\r\n      } finally {\r\n        commit('SET_LOADING', false);\r\n      }\r\n    },\r\n\r\n    async fetchStrategies({ commit }) {\r\n      commit('SET_LOADING', true);\r\n      try {\r\n        const response = await api.planning.getStrategies();\r\n        console.log('获取策略列表响应:', response);\r\n\r\n        // 处理不同格式的响应\r\n        if (Array.isArray(response)) {\r\n          commit('SET_STRATEGY_ITEMS', response);\r\n        }\r\n        else if (response.items) {\r\n          commit('SET_STRATEGY_ITEMS', response.items);\r\n        }\r\n        else if (response.success && response.items) {\r\n          commit('SET_STRATEGY_ITEMS', response.items);\r\n        }\r\n        else {\r\n          console.error('未知的API响应格式:', response);\r\n          commit('SET_ERROR', '获取策略列表失败');\r\n        }\r\n      } catch (error) {\r\n        console.error('获取策略列表错误:', error);\r\n        commit('SET_ERROR', error.message || '获取策略列表失败');\r\n      } finally {\r\n        commit('SET_LOADING', false);\r\n      }\r\n    },\r\n\r\n    async submitExamResult({ commit, state }, { examId, score, wrongQuestions }) {\r\n      commit('SET_LOADING', true);\r\n      try {\r\n        const result = {\r\n          name: state.userName,\r\n          exam_id: examId,\r\n          score: score,\r\n          wrong_questions: wrongQuestions\r\n        };\r\n\r\n        const response = await api.planning.submitExamResult(result);\r\n        console.log('提交试卷结果响应:', response);\r\n\r\n        // 处理不同格式的响应\r\n        return response.success === true ||\r\n               (response.message && response.message.includes('成功')) ||\r\n               !response.error;\r\n      } catch (error) {\r\n        console.error('提交试卷结果错误:', error);\r\n        commit('SET_ERROR', error.message || '提交试卷结果失败');\r\n        return false;\r\n      } finally {\r\n        commit('SET_LOADING', false);\r\n      }\r\n    },\r\n\r\n    async submitStrategyResult({ commit, state }, score) {\r\n      commit('SET_LOADING', true);\r\n      try {\r\n        const result = {\r\n          name: state.userName,\r\n          score: score,\r\n          is_pre_test: true // 默认为前测\r\n        };\r\n\r\n        const response = await api.planning.submitStrategyResult(result);\r\n        console.log('提交策略问卷结果响应:', response);\r\n\r\n        // 处理不同格式的响应\r\n        return response.success === true ||\r\n               (response.message && response.message.includes('成功')) ||\r\n               !response.error;\r\n      } catch (error) {\r\n        console.error('提交策略问卷结果错误:', error);\r\n        commit('SET_ERROR', error.message || '提交策略问卷结果失败');\r\n        return false;\r\n      } finally {\r\n        commit('SET_LOADING', false);\r\n      }\r\n    },\r\n\r\n    // 执行阶段\r\n    async fetchUserProfile({ commit, state }) {\r\n      if (!state.userName) return null;\r\n\r\n      commit('SET_LOADING', true);\r\n      try {\r\n        const response = await api.execution.getUserProfile(state.userName);\r\n        console.log('获取用户信息响应:', response);\r\n\r\n        // 处理不同格式的响应\r\n        if (response.user) {\r\n          commit('SET_USER_PROFILE', response.user);\r\n          return response.user;\r\n        }\r\n        else if (response.success && response.user) {\r\n          commit('SET_USER_PROFILE', response.user);\r\n          return response.user;\r\n        }\r\n        else if (response && typeof response === 'object' && !response.error) {\r\n          // 可能直接返回用户对象\r\n          commit('SET_USER_PROFILE', response);\r\n          return response;\r\n        }\r\n        else {\r\n          commit('SET_ERROR', '获取用户信息失败');\r\n          return null;\r\n        }\r\n      } catch (error) {\r\n        console.error('获取用户信息错误:', error);\r\n        commit('SET_ERROR', error.message || '获取用户信息失败');\r\n        return null;\r\n      } finally {\r\n        commit('SET_LOADING', false);\r\n      }\r\n    },\r\n\r\n    async fetchProfileAnalysis({ commit, state }) {\r\n      if (!state.userName) return '';\r\n\r\n      commit('SET_LOADING', true);\r\n      try {\r\n        const response = await api.execution.analyzeProfile(state.userName);\r\n        console.log('分析用户画像响应:', response);\r\n\r\n        // 处理不同格式的响应\r\n        if (response.analysis) {\r\n          commit('SET_PROFILE_ANALYSIS', response.analysis);\r\n          return response.analysis;\r\n        }\r\n        else if (response.success && response.analysis) {\r\n          commit('SET_PROFILE_ANALYSIS', response.analysis);\r\n          return response.analysis;\r\n        }\r\n        else if (typeof response === 'string') {\r\n          commit('SET_PROFILE_ANALYSIS', response);\r\n          return response;\r\n        }\r\n        else {\r\n          commit('SET_ERROR', '分析用户画像失败');\r\n          return '';\r\n        }\r\n      } catch (error) {\r\n        console.error('分析用户画像错误:', error);\r\n        commit('SET_ERROR', error.message || '分析用户画像失败');\r\n        return '';\r\n      } finally {\r\n        commit('SET_LOADING', false);\r\n      }\r\n    },\r\n\r\n    async fetchWrongAnswersAnalysis({ commit, state }) {\r\n      if (!state.userName) return '';\r\n\r\n      commit('SET_LOADING', true);\r\n      try {\r\n        const response = await api.execution.analyzeWrongAnswers(state.userName);\r\n        console.log('分析错题响应:', response);\r\n\r\n        // 处理不同格式的响应\r\n        if (response.analysis) {\r\n          commit('SET_WRONG_ANSWERS_ANALYSIS', response.analysis);\r\n          return response.analysis;\r\n        }\r\n        else if (response.success && response.analysis) {\r\n          commit('SET_WRONG_ANSWERS_ANALYSIS', response.analysis);\r\n          return response.analysis;\r\n        }\r\n        else if (typeof response === 'string') {\r\n          commit('SET_WRONG_ANSWERS_ANALYSIS', response);\r\n          return response;\r\n        }\r\n        else {\r\n          commit('SET_ERROR', response.error || '分析错题失败');\r\n          return '';\r\n        }\r\n      } catch (error) {\r\n        console.error('分析错题错误:', error);\r\n        commit('SET_ERROR', error.message || '分析错题失败');\r\n        return '';\r\n      } finally {\r\n        commit('SET_LOADING', false);\r\n      }\r\n    },\r\n\r\n    async fetchStrategySuggestions({ commit, state }) {\r\n      if (!state.userName) return '';\r\n\r\n      commit('SET_LOADING', true);\r\n      try {\r\n        const response = await api.execution.suggestStrategies(state.userName);\r\n        console.log('获取策略建议响应:', response);\r\n\r\n        // 处理不同格式的响应\r\n        if (response.suggestions) {\r\n          commit('SET_STRATEGY_SUGGESTIONS', response.suggestions);\r\n          return response.suggestions;\r\n        }\r\n        else if (response.success && response.suggestions) {\r\n          commit('SET_STRATEGY_SUGGESTIONS', response.suggestions);\r\n          return response.suggestions;\r\n        }\r\n        else if (typeof response === 'string') {\r\n          commit('SET_STRATEGY_SUGGESTIONS', response);\r\n          return response;\r\n        }\r\n        else {\r\n          commit('SET_ERROR', '获取策略建议失败');\r\n          return '';\r\n        }\r\n      } catch (error) {\r\n        console.error('获取策略建议错误:', error);\r\n        commit('SET_ERROR', error.message || '获取策略建议失败');\r\n        return '';\r\n      } finally {\r\n        commit('SET_LOADING', false);\r\n      }\r\n    },\r\n\r\n    async sendChatMessage({ commit, state }, message) {\r\n      if (!state.userName) return null;\r\n\r\n      // 添加用户消息到历史\r\n      const userMessage = {\r\n        role: 'user',\r\n        content: message,\r\n        timestamp: new Date().toISOString()\r\n      };\r\n      commit('ADD_CHAT_MESSAGE', userMessage);\r\n\r\n      commit('SET_LOADING', true);\r\n      try {\r\n        const response = await api.execution.chat(state.userName, message);\r\n        console.log('发送消息响应:', response);\r\n\r\n        // 处理不同格式的响应\r\n        if (response.response) {\r\n          // 添加AI回复到历史\r\n          const aiMessage = {\r\n            role: 'assistant',\r\n            content: response.response,\r\n            timestamp: new Date().toISOString()\r\n          };\r\n          commit('ADD_CHAT_MESSAGE', aiMessage);\r\n          return aiMessage;\r\n        }\r\n        else if (response.success && response.response) {\r\n          const aiMessage = {\r\n            role: 'assistant',\r\n            content: response.response,\r\n            timestamp: new Date().toISOString()\r\n          };\r\n          commit('ADD_CHAT_MESSAGE', aiMessage);\r\n          return aiMessage;\r\n        }\r\n        else if (typeof response === 'string') {\r\n          const aiMessage = {\r\n            role: 'assistant',\r\n            content: response,\r\n            timestamp: new Date().toISOString()\r\n          };\r\n          commit('ADD_CHAT_MESSAGE', aiMessage);\r\n          return aiMessage;\r\n        }\r\n        else {\r\n          commit('SET_ERROR', response.error || '发送消息失败');\r\n          return null;\r\n        }\r\n      } catch (error) {\r\n        console.error('发送消息错误:', error);\r\n        commit('SET_ERROR', error.message || '发送消息失败');\r\n        return null;\r\n      } finally {\r\n        commit('SET_LOADING', false);\r\n      }\r\n    },\r\n\r\n    // 反馈阶段\r\n    async fetchFinalSummary({ commit, state }) {\r\n      if (!state.userName) return '';\r\n\r\n      commit('SET_LOADING', true);\r\n      try {\r\n        const response = await api.feedback.getFinalSummary(state.userName);\r\n        console.log('获取学习总结响应:', response);\r\n\r\n        // 处理不同格式的响应\r\n        if (response.summary) {\r\n          commit('SET_FINAL_SUMMARY', response.summary);\r\n          return response.summary;\r\n        }\r\n        else if (response.success && response.summary) {\r\n          commit('SET_FINAL_SUMMARY', response.summary);\r\n          return response.summary;\r\n        }\r\n        else if (typeof response === 'string') {\r\n          commit('SET_FINAL_SUMMARY', response);\r\n          return response;\r\n        }\r\n        else {\r\n          commit('SET_ERROR', '获取学习总结失败');\r\n          return '';\r\n        }\r\n      } catch (error) {\r\n        console.error('获取学习总结错误:', error);\r\n        commit('SET_ERROR', error.message || '获取学习总结失败');\r\n        return '';\r\n      } finally {\r\n        commit('SET_LOADING', false);\r\n      }\r\n    },\r\n\r\n    // 系统状态\r\n    setCurrentPhase({ commit }, phase) {\r\n      commit('SET_CURRENT_PHASE', phase);\r\n    }\r\n  }\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}